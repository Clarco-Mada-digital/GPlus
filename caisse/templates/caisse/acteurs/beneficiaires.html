{% extends 'layout/layout.html' %}

{% block title_page %}Bénéficiaires{% endblock %}

{% block content %}

    <!-- En-tête avec bouton d'ajout -->
    <div class="flex justify-between items-center mb-8">
        <h1 class="text-2xl font-bold dark:text-white">Gestion des Bénéficiaires</h1>
        <button class="bg-blue-500 hover:bg-primary text-white font-semibold py-2 px-4 rounded flex items-center" onclick="document.getElementById('form-add-beneficiaire').classList.toggle('hidden')">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
            </svg>
            Nouveau Bénéficiaire
        </button>
    </div>

    <!-- Formulaire d'ajout -->
    <div class="hidden mb-8 bg-white dark:bg-secondary p-6 rounded-2xl" id="form-add-beneficiaire">
        <h2 class="text-2xl font-bold mb-4 dark:text-white">Ajouter un bénéficiaire</h2>
        <form method="post" 
        action="{% url 'caisse:creer_beneficiaire' %}"
        class="space-y-4">
            {% csrf_token %}
            <div class="grid grid-cols-1 gap-4">
                <div>
                    <label class="block text-sm font-medium dark:text-white">Type de bénéficiaire</label>
                    <select name="personnel_id" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <option value="">Bénéficiaire externe</option>
                        {% for personnel in personnels %}
                            <option value="{{ personnel.id }}">{{ personnel.first_name }} {{ personnel.last_name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium dark:text-white">Nom du bénéficiaire</label>
                    <input type="text" name="name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>
            </div>
            <div class="mt-4 flex justify-end space-x-2">
                <button type="button" onclick="document.getElementById('form-add-beneficiaire').classList.add('hidden')" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700">
                    Annuler
                </button>
                <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-blue-700">
                    Enregistrer
                </button>
            </div>
        </form>
    </div>

    <!-- Liste des bénéficiaires -->
    <!-- Version Mobile du tableau -->
    <div class="md:hidden grid grid-cols-1 md:grid-cols-3 gap-6">
        {% for beneficiaire in beneficiaires %}
            <div class="bg-white dark:bg-secondary h-full rounded-2xl p-6">
                <div class="flex justify-between h-full items-start">
                    <div>
                        <h3 class="text-lg font-semibold dark:text-white">
                            {% if beneficiaire.personnel %}
                                {{ beneficiaire.personnel.last_name }} {{ beneficiaire.personnel.first_name }}
                            {% else %}
                                {{ beneficiaire }}
                            {% endif %}
                        </h3>
                        <p class="text-gray-500 dark:text-gray-400">
                            {% if beneficiaire.personnel %}
                                Personnel interne
                            {% else %}
                                Bénéficiaire externe
                            {% endif %}
                        </p>
                    </div>
                    <div class="flex flex-col space-y-2 h-full justify-between">
                        <div class="flex flex-row space-x-2 flex justify-end items-start">
                            <a href="{% url 'caisse:editer_beneficiaire' beneficiaire.id %}" class="text-gray-600 hover:text-primary dark:text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                                </svg>
                            </a>
                            <button data-modal-target="popup-modal-mobile-{{ beneficiaire.id }}" class="text-gray-600 hover:text-red-500 dark:text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                        <div class="flex flex-row space-x-1  justify-end items-end">
                            <p class="text-gray-500 dark:text-gray-400">{{ beneficiaire.operations.entrees }}</p>
                            <svg class="inline" width="23" height="22" viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M16.6927 10.4289H15.979C15.8165 10.0214 15.5547 9.65644 15.2196 9.35814L16.3203 8.92239C16.4776 8.86014 16.5637 8.70456 16.519 8.55575C16.3862 8.11402 15.9382 7.78906 15.4059 7.78906H14.498C13.976 7.78906 13.5352 8.10175 13.3932 8.53053H12.4343C12.0742 9.72345 10.8578 10.6036 9.41649 10.6036C8.53667 10.6036 7.74071 10.2755 7.17209 9.74873C7.01194 9.95364 6.88076 10.1782 6.78408 10.4178C6.4969 10.3614 6.26077 10.1577 6.19475 9.89243C6.15247 9.72248 5.96443 9.61535 5.77505 9.65342C5.58556 9.69135 5.46622 9.85985 5.50852 10.0298C5.58043 10.3187 5.76139 10.5811 6.01805 10.7684C6.19372 10.8967 6.40027 10.986 6.61913 11.0307C6.60209 11.1509 6.59328 11.2734 6.59328 11.3977V11.7034C6.59328 12.862 7.35608 13.8599 8.45382 14.3121V15.0069C8.45382 15.385 8.79566 15.6916 9.21732 15.6916C9.63899 15.6916 9.98082 15.385 9.98082 15.0069V14.5705H12.8409V15.0069C12.8409 15.385 13.1828 15.6916 13.6044 15.6916C14.0261 15.6916 14.368 15.385 14.368 15.0069V14.2854C15.1706 13.9353 15.7853 13.2904 16.0386 12.5067H16.6926C17.1385 12.5067 17.5 12.181 17.5 11.7793V11.1563C17.5 10.7546 17.1386 10.4289 16.6927 10.4289ZM14.0985 10.611C13.9051 10.611 13.7482 10.4703 13.7482 10.2968C13.7482 10.1233 13.9051 9.98268 14.0985 9.98268C14.292 9.98268 14.4488 10.1233 14.4488 10.2968C14.4488 10.4703 14.292 10.611 14.0985 10.611Z" fill="#00B69B"></path>
                                <path d="M9.41639 5.62158C8.0802 5.62158 6.99316 6.59761 6.99316 7.7973C6.99316 8.997 8.08022 9.97303 9.41639 9.97303C10.7526 9.97303 11.8396 8.997 11.8396 7.7973C11.8396 6.59757 10.7525 5.62158 9.41639 5.62158ZM9.19137 7.46486H9.64142C10.1491 7.46486 10.5621 7.83549 10.5621 8.29105C10.5621 8.70805 10.2159 9.05369 9.76796 9.10921V9.22763C9.76796 9.40174 9.61055 9.5429 9.41639 9.5429C9.22224 9.5429 9.06483 9.40174 9.06483 9.22763V9.1172H8.97514C8.58673 9.1172 8.2707 8.83367 8.2707 8.48515C8.2707 8.31104 8.4281 8.16988 8.62226 8.16988C8.81642 8.16988 8.97382 8.31104 8.97382 8.48515L9.64139 8.48666C9.76135 8.48666 9.85892 8.39889 9.85892 8.29103C9.85892 8.18316 9.76135 8.09539 9.64139 8.09539H9.19135C8.68369 8.09539 8.2707 7.72478 8.2707 7.26922C8.2707 6.8522 8.61685 6.50656 9.06483 6.45103V6.36698C9.06483 6.19287 9.22224 6.05171 9.41639 6.05171C9.61055 6.05171 9.76796 6.19287 9.76796 6.36698V6.44303H9.85763C10.246 6.44303 10.5621 6.72658 10.5621 7.0751C10.5621 7.24921 10.4047 7.39037 10.2105 7.39037C10.0163 7.39037 9.85894 7.24921 9.85894 7.0751C9.85894 7.07459 9.85889 7.07438 9.85889 7.07438L9.19137 7.07356C9.07142 7.07356 8.97385 7.16133 8.97385 7.26922C8.97385 7.37708 9.07142 7.46486 9.19137 7.46486Z" fill="#00B69B"></path>
                            </svg>
                            <p class="text-gray-500 dark:text-gray-400">{{ beneficiaire.operations.sorties }}</p>
                            <svg class="inline" width="22" height="23" viewBox="0 0 22 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_394_243)">
                                    <path d="M15.0523 5.62158C14.366 5.62158 13.8096 6.17799 13.8096 6.86436V10.5725H15.9436C16.1377 10.5725 16.2951 10.4151 16.2951 10.221V6.86436C16.2951 6.17799 15.7387 5.62158 15.0523 5.62158V5.62158Z" fill="#FB6094"></path>
                                    <path d="M9.25045 14.4575C9.25045 12.3338 10.9781 10.5846 13.1302 10.5905V7.01579C13.1302 6.48101 13.3315 5.99243 13.6622 5.62158H7.46145C6.49254 5.62158 5.7041 6.41002 5.7041 7.37893V17.2637C5.7041 17.58 6.09098 17.7353 6.30973 17.5067L6.75949 17.0371L7.23457 17.5124C7.37168 17.6495 7.59434 17.6495 7.73168 17.5124L8.18191 17.0624L8.6366 17.5133C8.77371 17.6492 8.99473 17.6492 9.13184 17.5133L9.59379 17.0553L10.056 17.5133C10.1929 17.6492 10.4136 17.6492 10.5507 17.5135L10.6403 17.4249C9.76859 16.6962 9.25045 15.6185 9.25045 14.4575ZM8.54815 8.45752H9.24199V7.76368C9.24199 7.56952 9.3994 7.41211 9.59355 7.41211C9.78771 7.41211 9.94512 7.56952 9.94512 7.76368V8.45752H10.639C10.8331 8.45752 10.9905 8.61493 10.9905 8.80908C10.9905 9.00324 10.8331 9.16064 10.639 9.16064H9.94512V9.85449C9.94512 10.0486 9.78771 10.2061 9.59355 10.2061C9.3994 10.2061 9.24199 10.0486 9.24199 9.85449V9.16064H8.54815C8.35399 9.16064 8.19659 9.00324 8.19659 8.80908C8.19659 8.61493 8.35399 8.45752 8.54815 8.45752ZM7.48416 10.9196H9.85137C10.0455 10.9196 10.2029 11.077 10.2029 11.2712C10.2029 11.4653 10.0455 11.6228 9.85137 11.6228H7.48416C7.29 11.6228 7.13259 11.4653 7.13259 11.2712C7.13259 11.077 7.29 10.9196 7.48416 10.9196ZM8.6572 14.4329H7.48181C7.28766 14.4329 7.13025 14.2755 7.13025 14.0813C7.13025 13.8872 7.28766 13.7298 7.48181 13.7298H8.6572C8.85136 13.7298 9.00877 13.8872 9.00877 14.0813C9.00877 14.2755 8.85136 14.4329 8.6572 14.4329ZM8.8916 13.029H7.48296C7.2888 13.029 7.1314 12.8716 7.1314 12.6774C7.1314 12.4833 7.2888 12.3259 7.48296 12.3259H8.8916C9.08576 12.3259 9.24316 12.4833 9.24316 12.6774C9.24316 12.8716 9.08576 13.029 8.8916 13.029Z" fill="#FB6094"></path>
                                    <path d="M13.1172 11.2935C11.3725 11.2935 9.95312 12.7129 9.95312 14.4575C9.95312 16.2022 11.3725 17.6216 13.1172 17.6216C14.8619 17.6216 16.2812 16.2022 16.2812 14.4575C16.2812 12.7129 14.8619 11.2935 13.1172 11.2935ZM13.4699 15.8115V15.8449C13.4699 16.0391 13.3124 16.1965 13.1183 16.1965C12.9241 16.1965 12.7667 16.0391 12.7667 15.8449V15.8389C12.6092 15.8014 12.4631 15.7394 12.3473 15.6636C12.1848 15.5573 12.1393 15.3394 12.2455 15.1769C12.3519 15.0144 12.5697 14.9689 12.7322 15.0752C12.8761 15.1693 13.1133 15.2051 13.2299 15.1502C13.3054 15.1147 13.3639 15.0388 13.372 14.9657C13.3894 14.81 13.1455 14.7232 12.9999 14.6657C12.7795 14.5787 12.5053 14.4703 12.3461 14.1829C12.1191 13.7732 12.3179 13.2331 12.7667 13.0483V13.0306C12.7667 12.8365 12.9241 12.6791 13.1183 12.6791C13.3105 12.6791 13.4665 12.8334 13.4696 13.0249C13.5961 13.0645 13.7127 13.1278 13.806 13.2139C13.9488 13.3455 13.9577 13.5679 13.8261 13.7106C13.6944 13.8534 13.472 13.8623 13.3293 13.7307C13.2715 13.6773 13.0932 13.6558 13.0158 13.7078C12.9637 13.7428 12.9433 13.8099 12.9611 13.8421C13.0354 13.9762 13.4242 14.0221 13.7185 14.2514C14.3196 14.7199 14.1104 15.5658 13.4699 15.8115Z" fill="#FB6094"></path>
                                </g>
                                <defs>
                                    <clipPath id="clip0_394_243">
                                        <rect width="12" height="12" fill="white" transform="translate(5 5.62158)"></rect>
                                    </clipPath>
                                </defs>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            {% comment %} Modal suppression Mobile{% endcomment %}
            <div id="popup-modal-mobile-{{ beneficiaire.id }}" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
                <div class="relative p-4 w-full max-w-md max-h-full">
                    <div class="relative bg-white rounded-lg shadow dark:bg-secondary">
                        <button type="button" class="absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="popup-modal-mobile-{{ beneficiaire.id }}">
                            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                            </svg>
                            <span class="sr-only">Fermer</span>
                        </button>
                        <div class="p-4 md:p-5 text-center">
                            <svg class="mx-auto mb-4 text-gray-400 w-12 h-12 dark:text-gray-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                            </svg>
                            <h3 class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400">Êtes-vous sûr de vouloir supprimer ce bénéficiaire ref: {{ beneficiaire }} ?</h3>
                            <a href="{% url 'caisse:supprimer_beneficiaire' beneficiaire.id  %}" class="text-gray-500 dark:text-white bg-red-600 dark:bg-red-600 hover:bg-red-700 dark:hover:bg-red-700 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center me-2">
                                Oui, supprimer
                            </a>
                            <button data-modal-hide="popup-modal-mobile-{{ beneficiaire.id }}" type="button" class="text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600">
                                Non, annuler
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <!-- Version desktop du tableau -->
    <table class="w-full hidden md:table">
        <thead class="bg-gray-50 dark:bg-gray-700">
            <tr class="px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">
                <th class="px-4 py-3 text-left">
                    {% if request.GET.sort == 'name' and request.GET.order == 'asc' %}
                    <a href="?sort=name&order=desc">Nom ⬇</a>
                    {% elif request.GET.sort == 'name' and request.GET.order == 'desc' %}
                    <a href="?">Nom ⬆</a>
                    {% else %}
                    <a href="?sort=name&order=asc">Nom ⬆⬇</a>
                    {% endif %}
                </th>
                <th class="px-4 py-3 text-center">
                    {% if request.GET.sort == 'type' and request.GET.order == 'asc' %}
                    <a href="?sort=type&order=desc">Type ⬇</a>
                    {% elif request.GET.sort == 'type' and request.GET.order == 'desc' %}
                    <a href="?">Type ⬆</a>
                    {% else %}
                    <a href="?sort=type&order=asc">Type ⬆⬇</a>
                    {% endif %}
                </th>
                <th class="px-4 py-3 text-center">
                    {% if request.GET.sort == 'operation' and request.GET.order == 'asc' %}
                    <a href="?sort=operation&order=desc">Opération ⬇</a>
                    {% elif request.GET.sort == 'operation' and request.GET.order == 'desc' %}
                    <a href="?">Opération ⬆</a>
                    {% else %}
                    <a href="?sort=operation&order=asc">Opération ⬆⬇</a>
                    {% endif %}
                </th>
                </th>
                <th class="px-4 py-3">Actions</th>
            </tr>
        </thead>
        <tbody class="text-liste dark:text-white font-medium">
            {% for beneficiaire in beneficiaires %}
                <tr class="{% cycle 'bg-white dark:bg-secondary' 'bg-gray-100 dark:bg-gray-800' %} border-b border-white dark:border-gray-800 hover:bg-gray-200 dark:hover:bg-gray-800">
                    <td class="py-3 px-4 ">
                        <div class="flex gap-2">
                            {% if beneficiaire.personnel %}
                                {{ beneficiaire.personnel.last_name }} {{ beneficiaire.personnel.first_name }}
                            {% else %}
                                {{ beneficiaire }}
                            {% endif %}
                        </div>
                    </td>
                    <td class="py-3 px-4 text-center">
                        {% if beneficiaire.personnel %}
                            Personnel interne
                        {% else %}
                            Bénéficiaire externe
                        {% endif %}
                    </td>
                    <td class="flex py-3 px-4 space-x-2 justify-center text-center">
                        <p class="dark:text-white">{{ beneficiaire.operations.entrees }}</p>
                        <svg class="inline" width="23" height="22" viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="0.5" width="22" height="22" rx="11" fill="#DCFAF8"></rect>
                            <path d="M16.6927 10.4289H15.979C15.8165 10.0214 15.5547 9.65644 15.2196 9.35814L16.3203 8.92239C16.4776 8.86014 16.5637 8.70456 16.519 8.55575C16.3862 8.11402 15.9382 7.78906 15.4059 7.78906H14.498C13.976 7.78906 13.5352 8.10175 13.3932 8.53053H12.4343C12.0742 9.72345 10.8578 10.6036 9.41649 10.6036C8.53667 10.6036 7.74071 10.2755 7.17209 9.74873C7.01194 9.95364 6.88076 10.1782 6.78408 10.4178C6.4969 10.3614 6.26077 10.1577 6.19475 9.89243C6.15247 9.72248 5.96443 9.61535 5.77505 9.65342C5.58556 9.69135 5.46622 9.85985 5.50852 10.0298C5.58043 10.3187 5.76139 10.5811 6.01805 10.7684C6.19372 10.8967 6.40027 10.986 6.61913 11.0307C6.60209 11.1509 6.59328 11.2734 6.59328 11.3977V11.7034C6.59328 12.862 7.35608 13.8599 8.45382 14.3121V15.0069C8.45382 15.385 8.79566 15.6916 9.21732 15.6916C9.63899 15.6916 9.98082 15.385 9.98082 15.0069V14.5705H12.8409V15.0069C12.8409 15.385 13.1828 15.6916 13.6044 15.6916C14.0261 15.6916 14.368 15.385 14.368 15.0069V14.2854C15.1706 13.9353 15.7853 13.2904 16.0386 12.5067H16.6926C17.1385 12.5067 17.5 12.181 17.5 11.7793V11.1563C17.5 10.7546 17.1386 10.4289 16.6927 10.4289ZM14.0985 10.611C13.9051 10.611 13.7482 10.4703 13.7482 10.2968C13.7482 10.1233 13.9051 9.98268 14.0985 9.98268C14.292 9.98268 14.4488 10.1233 14.4488 10.2968C14.4488 10.4703 14.292 10.611 14.0985 10.611Z" fill="#00B69B"></path>
                            <path d="M9.41639 5.62158C8.0802 5.62158 6.99316 6.59761 6.99316 7.7973C6.99316 8.997 8.08022 9.97303 9.41639 9.97303C10.7526 9.97303 11.8396 8.997 11.8396 7.7973C11.8396 6.59757 10.7525 5.62158 9.41639 5.62158ZM9.19137 7.46486H9.64142C10.1491 7.46486 10.5621 7.83549 10.5621 8.29105C10.5621 8.70805 10.2159 9.05369 9.76796 9.10921V9.22763C9.76796 9.40174 9.61055 9.5429 9.41639 9.5429C9.22224 9.5429 9.06483 9.40174 9.06483 9.22763V9.1172H8.97514C8.58673 9.1172 8.2707 8.83367 8.2707 8.48515C8.2707 8.31104 8.4281 8.16988 8.62226 8.16988C8.81642 8.16988 8.97382 8.31104 8.97382 8.48515L9.64139 8.48666C9.76135 8.48666 9.85892 8.39889 9.85892 8.29103C9.85892 8.18316 9.76135 8.09539 9.64139 8.09539H9.19135C8.68369 8.09539 8.2707 7.72478 8.2707 7.26922C8.2707 6.8522 8.61685 6.50656 9.06483 6.45103V6.36698C9.06483 6.19287 9.22224 6.05171 9.41639 6.05171C9.61055 6.05171 9.76796 6.19287 9.76796 6.36698V6.44303H9.85763C10.246 6.44303 10.5621 6.72658 10.5621 7.0751C10.5621 7.24921 10.4047 7.39037 10.2105 7.39037C10.0163 7.39037 9.85894 7.24921 9.85894 7.0751C9.85894 7.07459 9.85889 7.07438 9.85889 7.07438L9.19137 7.07356C9.07142 7.07356 8.97385 7.16133 8.97385 7.26922C8.97385 7.37708 9.07142 7.46486 9.19137 7.46486Z" fill="#00B69B"></path>
                        </svg>
                        <p class="dark:text-white">{{ beneficiaire.operations.sorties }}</p>
                        <svg class="inline" width="22" height="23" viewBox="0 0 22 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect y="0.621582" width="22" height="22" rx="11" fill="#FFE0EB"></rect>
                            <g clip-path="url(#clip0_394_243)">
                                <path d="M15.0523 5.62158C14.366 5.62158 13.8096 6.17799 13.8096 6.86436V10.5725H15.9436C16.1377 10.5725 16.2951 10.4151 16.2951 10.221V6.86436C16.2951 6.17799 15.7387 5.62158 15.0523 5.62158V5.62158Z" fill="#FB6094"></path>
                                <path d="M9.25045 14.4575C9.25045 12.3338 10.9781 10.5846 13.1302 10.5905V7.01579C13.1302 6.48101 13.3315 5.99243 13.6622 5.62158H7.46145C6.49254 5.62158 5.7041 6.41002 5.7041 7.37893V17.2637C5.7041 17.58 6.09098 17.7353 6.30973 17.5067L6.75949 17.0371L7.23457 17.5124C7.37168 17.6495 7.59434 17.6495 7.73168 17.5124L8.18191 17.0624L8.6366 17.5133C8.77371 17.6492 8.99473 17.6492 9.13184 17.5133L9.59379 17.0553L10.056 17.5133C10.1929 17.6492 10.4136 17.6492 10.5507 17.5135L10.6403 17.4249C9.76859 16.6962 9.25045 15.6185 9.25045 14.4575ZM8.54815 8.45752H9.24199V7.76368C9.24199 7.56952 9.3994 7.41211 9.59355 7.41211C9.78771 7.41211 9.94512 7.56952 9.94512 7.76368V8.45752H10.639C10.8331 8.45752 10.9905 8.61493 10.9905 8.80908C10.9905 9.00324 10.8331 9.16064 10.639 9.16064H9.94512V9.85449C9.94512 10.0486 9.78771 10.2061 9.59355 10.2061C9.3994 10.2061 9.24199 10.0486 9.24199 9.85449V9.16064H8.54815C8.35399 9.16064 8.19659 9.00324 8.19659 8.80908C8.19659 8.61493 8.35399 8.45752 8.54815 8.45752ZM7.48416 10.9196H9.85137C10.0455 10.9196 10.2029 11.077 10.2029 11.2712C10.2029 11.4653 10.0455 11.6228 9.85137 11.6228H7.48416C7.29 11.6228 7.13259 11.4653 7.13259 11.2712C7.13259 11.077 7.29 10.9196 7.48416 10.9196ZM8.6572 14.4329H7.48181C7.28766 14.4329 7.13025 14.2755 7.13025 14.0813C7.13025 13.8872 7.28766 13.7298 7.48181 13.7298H8.6572C8.85136 13.7298 9.00877 13.8872 9.00877 14.0813C9.00877 14.2755 8.85136 14.4329 8.6572 14.4329ZM8.8916 13.029H7.48296C7.2888 13.029 7.1314 12.8716 7.1314 12.6774C7.1314 12.4833 7.2888 12.3259 7.48296 12.3259H8.8916C9.08576 12.3259 9.24316 12.4833 9.24316 12.6774C9.24316 12.8716 9.08576 13.029 8.8916 13.029Z" fill="#FB6094"></path>
                                <path d="M13.1172 11.2935C11.3725 11.2935 9.95312 12.7129 9.95312 14.4575C9.95312 16.2022 11.3725 17.6216 13.1172 17.6216C14.8619 17.6216 16.2812 16.2022 16.2812 14.4575C16.2812 12.7129 14.8619 11.2935 13.1172 11.2935ZM13.4699 15.8115V15.8449C13.4699 16.0391 13.3124 16.1965 13.1183 16.1965C12.9241 16.1965 12.7667 16.0391 12.7667 15.8449V15.8389C12.6092 15.8014 12.4631 15.7394 12.3473 15.6636C12.1848 15.5573 12.1393 15.3394 12.2455 15.1769C12.3519 15.0144 12.5697 14.9689 12.7322 15.0752C12.8761 15.1693 13.1133 15.2051 13.2299 15.1502C13.3054 15.1147 13.3639 15.0388 13.372 14.9657C13.3894 14.81 13.1455 14.7232 12.9999 14.6657C12.7795 14.5787 12.5053 14.4703 12.3461 14.1829C12.1191 13.7732 12.3179 13.2331 12.7667 13.0483V13.0306C12.7667 12.8365 12.9241 12.6791 13.1183 12.6791C13.3105 12.6791 13.4665 12.8334 13.4696 13.0249C13.5961 13.0645 13.7127 13.1278 13.806 13.2139C13.9488 13.3455 13.9577 13.5679 13.8261 13.7106C13.6944 13.8534 13.472 13.8623 13.3293 13.7307C13.2715 13.6773 13.0932 13.6558 13.0158 13.7078C12.9637 13.7428 12.9433 13.8099 12.9611 13.8421C13.0354 13.9762 13.4242 14.0221 13.7185 14.2514C14.3196 14.7199 14.1104 15.5658 13.4699 15.8115Z" fill="#FB6094"></path>
                            </g>
                            <defs>
                                <clipPath id="clip0_394_243">
                                    <rect width="12" height="12" fill="white" transform="translate(5 5.62158)"></rect>
                                </clipPath>
                            </defs>
                        </svg>
                        
                    </td>
                    <td class="py-3 px-4 text-center">
                        <div class="flex space-x-4 justify-center item-center">
                            <a href="{% url 'caisse:editer_beneficiaire' beneficiaire.id %}" class="text-gray-600 hover:text-primary dark:text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                                </svg>
                            </a>
                            <button data-modal-target="popup-modal-desktop-{{ beneficiaire.id }}" class="text-gray-600 hover:text-red-500 dark:text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </td>
                </tr>

                {% comment %} Modal suppression Desktop{% endcomment %}
                <div id="popup-modal-desktop-{{ beneficiaire.id }}" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
                    <div class="relative p-4 w-full max-w-md max-h-full">
                        <div class="relative bg-white rounded-lg shadow dark:bg-secondary">
                            <button type="button" class="absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="popup-modal-desktop-{{ beneficiaire.id }}">
                                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                                </svg>
                                <span class="sr-only">Fermer</span>
                            </button>
                            <div class="p-4 md:p-5 text-center">
                                <svg class="mx-auto mb-4 text-gray-400 w-12 h-12 dark:text-gray-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                                </svg>
                                <h3 class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400">Êtes-vous sûr de vouloir supprimer ce bénéficiaire ref: {{ beneficiaire }} ?</h3>
                                <a href="{% url 'caisse:supprimer_beneficiaire' beneficiaire.id  %}" class="text-gray-500 dark:text-white bg-red-600 dark:bg-red-600 hover:bg-red-700 dark:hover:bg-red-700 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center me-2">
                                    Oui, supprimer
                                </a>
                                <button data-modal-hide="popup-modal-desktop-{{ beneficiaire.id }}" type="button" class="text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600">
                                    Non, annuler
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>

{% endblock %}