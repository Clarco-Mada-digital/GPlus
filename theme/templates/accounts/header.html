<header class="flex items-center justify-between p-4 bg-white border-b border-slate-100 dark:border-slate-700 dark:bg-gray-900">
  <div class="flex items-center space-x-3 lg:space-x-0">
    <button
      id="menu-toggle"
      type="button"
      class="inline-flex items-center justify-center p-2 text-slate-500 rounded-lg lg:hidden hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-slate-200 dark:text-slate-400 dark:hover:bg-slate-700 dark:focus:ring-slate-600"
      @click="$store.sidebar.toggle()"
    >
      <span class="sr-only">Ouvrir le menu</span>
      <svg
        class="w-6 h-6"
        fill="currentColor"
        viewBox="0 0 20 20"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
          clip-rule="evenodd"
        ></path>
      </svg>
    </button>
    <h1 class="text-2xl font-bold text-slate-800 dark:text-white">
      {{ header_title|default:"Tableau de bord" }}
    </h1>
  </div>

  <div class="flex items-center space-x-3">
    <button
      class="hover:text-dark-900 relative flex h-11 w-11 items-center justify-center rounded-full border border-gray-200 bg-white text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700 dark:border-gray-800 dark:bg-gray-900 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-white"
      @click.prevent="darkMode = !darkMode"
      :aria-label="darkMode ? 'Désactiver le mode sombre' : 'Activer le mode sombre'">
      <svg
        class="hidden dark:block"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8V16Z"
          fill="currentColor"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM12 4V12C12 13.1046 12.8954 14 14 14C15.1046 14 16 13.1046 16 12C16 10.8954 15.1046 10 14 10C13.4477 10 12.9488 10.2107 12.5858 10.5858C12.2107 10.9488 12 11.4477 12 12V4Z"
          fill="currentColor"
        />
      </svg>
      <svg
        class="dark:hidden"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8V16Z"
          fill="currentColor"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM12 4V12C12 13.1046 12.8954 14 14 14C15.1046 14 16 13.1046 16 12C16 10.8954 15.1046 10 14 10C13.4477 10 12.9488 10.2107 12.5858 10.5858C12.2107 10.9488 12 11.4477 12 12V4Z"
          fill="currentColor"
        />
      </svg>
    </button>

    <!-- User Menu -->
    <div class="relative" x-data="{ open: false }">
      <button
        @click="open = !open"
        class="flex items-center justify-center w-10 h-10 text-sm font-medium text-white bg-slate-700 rounded-full hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-white"
      >
        <span class="sr-only">Ouvrir le menu utilisateur</span>
        <span class="text-lg">{{ user.first_name|first|upper }}{{ user.last_name|first|upper }}</span>
      </button>

      <!-- Dropdown menu -->
      <div
        x-show="open"
        @click.away="open = false"
        class="absolute right-0 z-10 w-48 mt-2 origin-top-right bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none dark:bg-gray-800"
        role="menu"
        aria-orientation="vertical"
        aria-labelledby="user-menu"
        style="display: none"
      >
        <div class="px-4 py-3">
          <p class="text-sm text-gray-900 dark:text-white">
            {{ user.get_full_name|default:user.username }}
          </p>
          <p class="text-sm font-medium text-gray-500 truncate dark:text-gray-400">
            {{ user.email }}
          </p>
        </div>
        <div class="py-1" role="none">
          <a
            href="{% url 'account_logout' %}"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"
            role="menuitem"
            >Se déconnecter</a
          >
        </div>
      </div>
    </div>
  </div>
</header>
</div>